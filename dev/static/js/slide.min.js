// I will be creating a different pen with touch support but right // now I have no time for it due to school

const slider = document.querySelector(".productinfo__slide--items");
const slides = document.querySelectorAll(".productinfo__slide--items-item");
const button = document.querySelectorAll(".button");

let current = 0;
let prev = slides.length;
let next = 1;

const nav = {

    prev: document.querySelector('.magic-slide-prev'),
    next: document.querySelector('.magic-slide-next'),
    btns: document.querySelectorAll('.button-slider-container button.button'),

    setState(stage) {
      if(stage === 'last') {
        this.next.classList.add('slide-btn_disabled')
        // this.next.setAttribute('disabled')
      }
      else if(stage === 'first') {
        this.prev.classList.add('slide-btn_disabled')
        // this.prev.setAttribute('disabled')
      }
      else {
        this.btns.forEach(el => {
          el.classList.remove('slide-btn_disabled')
          el.removeAttribute('disabled')
        })
      }
    }

}

for (let i = 0; i < button.length; i++) {
  button[i].addEventListener("click", () => (i == 0 ? gotoPrev() : gotoNext()));
}

const gotoPrev = () => {
  if(current === 0) {
    return false;
  }
  current > 0 ? gotoNum(current - 1) : gotoNum(slides.length - 1);
}
const gotoNext = () => {
  if(current === slides.length - 1) {
    return false;
  }
  current < slides.length - 1 ? gotoNum(current + 1) : gotoNum(0);
}
const gotoNum = (number) => {

  current = number;
  prev = current - 1;
  next = current + 1;

  for (let i = 0; i < slides.length; i++) {
    slides[i].classList.remove("active");
    slides[i].classList.remove("prev");
    slides[i].classList.remove("next");
  }

  nav.setState(null)

  if (next == slides.length) {
    nav.setState('last')
    next = -1;
  }

  if (prev == -1) {
    nav.setState('first')
    prev = 1;
  }

  slides[current].classList.add("active");
  slides[prev].classList.add("prev");
  slides[next].classList.add("next");
};

window.addEventListener("onload", gotoNum(current));
